{% extends "layout.html" %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <div>
        <h2 style="font-size: 24px; font-weight: 700;">Trending Research</h2>
        <p style="color: #64748b;">Explore top papers curated for academic applications.</p>
    </div>
    <input type="text" placeholder="Search papers..." style="padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px; width: 250px;">
</div>

<div class="job-grid">
    {% for job in internships %}
    <div class="card">
        <span class="tag-badge">{{ job.domain }}</span>
        <span style="float:right; font-size:12px; color:#94a3b8;">{{ job.created_at.strftime('%Y') }}</span>
        
        <h3>{{ job.title }}</h3>
        
        <p>{{ job.description[:100] }}...</p>
        
        <button class="btn-outline" onclick="openPaperModal('{{ job.title }}', '{{ job.description|replace('\n', ' ') }}', '{{ job.type }}', '{{ job.required_skills }}')">
            <i class="fa-solid fa-book-open"></i> Read Paper
        </button>
        
        <div style="margin-top: 15px; display:flex; justify-content:space-between; font-size: 11px; color: #94a3b8; font-weight:600; text-transform:uppercase;">
            <span><i class="fa-solid fa-user-circle"></i> {{ job.author.full_name }}</span>
            <span>{{ job.type }}</span>
        </div>
    </div>
    {% endfor %}
</div>

<div id="paperModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; align-items:center; justify-content:center;">
    <div style="background:white; width:600px; padding:30px; border-radius:16px; position:relative; box-shadow:0 20px 50px rgba(0,0,0,0.2);">
        <button onclick="closeModal()" style="position:absolute; top:20px; right:20px; border:none; background:none; font-size:20px; cursor:pointer;">&times;</button>
        
        <span id="modal-domain" class="tag-badge">DOMAIN</span>
        <h2 id="modal-title" style="margin-bottom:15px; font-size:24px;">Paper Title</h2>
        <p id="modal-desc" style="color:#475569; line-height:1.6; margin-bottom:20px;"></p>
        
        <div style="background:#f8fafc; padding:15px; border-radius:8px; margin-bottom:20px;">
            <p style="font-size:13px; font-weight:bold; color:#0f172a;">REQUIRED SKILLS:</p>
            <p id="modal-skills" style="font-size:13px; color:#64748b;"></p>
        </div>

        <div style="display:flex; gap:10px;">
            <button class="btn-black" style="flex:1; padding:12px;">Download PDF</button>
            <button class="btn-black" style="flex:1; padding:12px; background:#2563eb;">Apply for Research</button>
        </div>
    </div>
</div>

<script>
    function openPaperModal(title, desc, type, skills) {
        document.getElementById('modal-title').innerText = title;
        document.getElementById('modal-desc').innerText = desc;
        document.getElementById('modal-skills').innerText = skills;
        document.getElementById('paperModal').style.display = 'flex';
    }
    function closeModal() {
        document.getElementById('paperModal').style.display = 'none';
    }
</script>
{% endblock %}